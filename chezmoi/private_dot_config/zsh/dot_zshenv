#!/usr/bin/env zsh
[[ -v sourced_zdotdir_zshenv ]] && return || true
sourced_zdotdir_zshenv=1

setopt EXTENDED_GLOB

skip_global_compinit=1

home_zshenv=${HOME}/.zshenv
[[ -f "${home_zshenv}" ]] && source "${home_zshenv}" || true

typeset -U path=(${HOME}{/.local,}/{,s}bin(N) ${(Oaz)^NIX_PROFILES}/bin /opt/homebrew/{,s}bin(N) ${^path}(N))

export XDG_CACHE_HOME=${HOME}/.cache
export XDG_CONFIG_HOME=${HOME}/.config
export XDG_DATA_HOME=${HOME}/.local/share
export XDG_STATE_HOME=${HOME}/.local/state
export ZDOTDIR=${XDG_CONFIG_HOME}/zsh

# custom SSL certificate
export NODE_USE_SYSTEM_CA=1
export UV_NATIVE_TLS=true
cert_file=${HOME}/.config/cloudflare/combined-bundle.pem
if [[ -f "${cert_file}" ]]; then
  export NODE_EXTRA_CA_CERTS=${cert_file}
  export GIT_SSL_CAINFO=${cert_file}
  export REQUESTS_CA_BUNDLE=${cert_file}
  export SSL_CERT_FILE=${cert_file}
fi
